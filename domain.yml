version: '3.1'
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
intents:
- confirmacion
- consult_info
- despedida
- detener_proceso
- iniciar_proceso
- negacion
- out_of_scope
- saludo
actions:
- action_do_nothing
- action_consult_info
- validate_automuestreo_form
entities:
- rango_edad
- sexual_activa
- relacion_reciente
- capacidad_mental
- idioma_espanol
- embarazada
- tratamiento_ccu
- medi_intravaginal
- menstruando
- ets
- enfermedad_autoinmune

slots:
  formulario_completo:
    type: bool
    influence_conversation: false
    mappings:
    - type: custom
  edad_usuario:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: rango_edad
  es_sexual_activa:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: sexual_activa
  tiene_capacidad_mental:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: capacidad_mental
  habla_espanol:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: idioma_espanol
  esta_embarazada:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: embarazada
  tratamiento_previo_ccu:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: tratamiento_ccu
  relacion_reciente_horas:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: relacion_reciente
  toma_medi_intravaginal:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: medi_intravaginal
  esta_menstruando_ahora:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: menstruando
  fecha_ultima_menstruacion:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  fecha_ultimo_pap:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  fecha_ultimo_vph:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  num_parejas_sexuales:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  tiene_ets:
    type: bool
    mappings:
    - type: from_entity
      entity: ets
  nombre_ets:
    type: text
    mappings:
    - type: custom
  tiene_enfermedad_autoinmune:
    type: bool
    mappings:
    - type: from_entity
      entity: enfermedad_autoinmune
  nombre_enfermedad_autoinmune:
    type: text
    mappings:
    - type: custom
forms:
  automuestreo_form:
    required_slots:
    - edad_usuario
responses:
  utter_saludo:
  - text: |
      ðŸ‘‹ Â¡Hola! Soy tu asistente virtual de salud. 
      Estoy aquÃ­ para responder tus preguntas sobre Virus del Papiloma Humano (VPH), CÃ¡ncer de Cuello Uterino (CCU) y temas relacionados con tu salud sexual y reproductiva. 
      Si tienes alguna duda, puedes preguntarme. Â¡Estoy para ayudarte! ðŸ˜Š
  utter_despedida:
  - text: |
      âœ… Gracias por confiar en este espacio de informaciÃ³n. 
      Si tienes mÃ¡s preguntas sobre VPH, CÃ¡ncer de Cuello Uterino o salud sexual y reproductiva, no dudes en volver. 
      Â¡Cuida de ti y de tu salud! ðŸ˜Š
  utter_out_of_scope:
  - text: Lo siento, pero solo puedo brindar informaciÃ³n sobre salud sexual y reproductiva, asÃ­ como apoyo en casos de violencia de gÃ©nero o abuso. Â¿Puedo ayudarte con alguna duda sobre estos temas?
  utter_ask_automuestreo_form_edad_usuario:
  - text: |
      ðŸ“‹ **Â¡Comenzemos con el proceso!**
      Primero debemos asegurarnos de que eres apta para realizarte el automuestreo en este momento.
      Por favor, responde a las siguientes preguntas con sinceridad.
      Â¿Tu edad esta entre los 30 y 65 aÃ±os?
    buttons:
    - title: Si
      payload: /confirmacion{{"rango_edad":true}}
    - title: No
      payload: /negacion{{"rango_edad":false}}
  utter_no_cumple_edad:
  - text: Lo sentimos, no puedes ser parte del estudio porque no cumples con la edad requerida (30 - 65 aÃ±os). Sin embargo, es importante que te realices exÃ¡menes de Papanicolaou (Pap) y pruebas de Virus del Papiloma Humano (VPH) regularmente.
  utter_ask_automuestreo_form_es_sexual_activa:
  - text: Â¿Tienes o has tenido vida sexual activa?
    buttons:
    - title: Si
      payload: /confirmacion{{"sexual_activa":true}}
    - title: No
      payload: /negacion{{"sexual_activa":false}}
  utter_no_tiene_relacion_sexual:
  - text: Si no has tenido relaciones sexuales entonces no es necesario que te realices el automuestreo en este momento.
  utter_ask_automuestreo_form_relacion_reciente_horas:
  - text: Â¿Has tenido relaciones sexuales en las Ãºltimas 48 horas?
    buttons:
    - title: Si
      payload: /confirmacion{{"relacion_reciente":true}}
    - title: No
      payload: /negacion{{"relacion_reciente":false}}
  utter_relacion_reciente:
  - text: Lo sentimos, en este momento no puedes realizarte el automuestreo. Puedes intentar otro dÃ­a.
  utter_ask_automuestreo_form_tiene_capacidad_mental:
  - text: Â¿Tienes la capacidad de entender la naturaleza, el propÃ³sito y los posibles riesgos del estudio, asÃ­ como de dar un consentimiento informado?
    buttons:
    - title: Si
      payload: /confirmacion{{"capacidad_mental":true}}
    - title: No
      payload: /negacion{{"capacidad_mental":false}}
  utter_no_capacidad_mental:
  - text: Lo sentimos, no puedes realizarte el automuestreo en este momento.
  utter_ask_automuestreo_form_habla_espanol:
  - text: Â¿Eres capaz de comunicarte en espaÃ±ol?
    buttons:
    - title: Si
      payload: /confirmacion{{"idioma_espanol":true}}
    - title: No
      payload: /negacion{{"idioma_espanol":false}}
  utter_no_habla_espanol:
  - text: Lo sentimos, el proceso solo estÃ¡ disponible en espaÃ±ol.
  utter_ask_automuestreo_form_esta_embarazada:
  - text: Â¿EstÃ¡s embarazada?
    buttons:
    - title: Si
      payload: /confirmacion{{"embarazada":true}}
    - title: No
      payload: /negacion{{"embarazada":false}}
  utter_esta_embarazada:
  - text: Lo sentimos, no puedes ser parte del estudio en este momento. Sin embargo, es importante que puedas hacerlo cuando ya no estÃ©s embarazada.
  utter_ask_automuestreo_form_tratamiento_previo_ccu:
  - text: Â¿Has tenido un tratamiento previo del cuello uterino (quimioterapia, LEEP, LLETZ) en los Ãºltimos 6 meses?
    buttons:
    - title: Si
      payload: /confirmacion{{"tratamiento_ccu":true}}
    - title: No
      payload: /negacion{{"tratamiento_ccu":false}}
  utter_tratamiento_previo_ccu:
  - text: Lo sentimos, no puedes ser parte del estudio en este momento.
  utter_ask_automuestreo_form_toma_medi_intravaginal:
  - text: Â¿Has utilizado algÃºn medicamento intravaginal en la Ãºltima semana?
    buttons:
    - title: Si
      payload: /confirmacion{{"medi_intravaginal":true}}
    - title: No
      payload: /negacion{{"medi_intravaginal":false}}
  utter_toma_medi_intravaginal:
  - text: Lo sentimos, no puedes realizarte el automuestreo en este momento.
  utter_ask_automuestreo_form_esta_menstruando_ahora:
  - text: Â¿EstÃ¡s con tu perÃ­odo menstrual en este momento?
    buttons:
    - title: Si
      payload: /confirmacion{{"menstruando":true}}
    - title: No
      payload: /negacion{{"menstruando":false}}
  utter_esta_menstruando_ahora:
  - text: Lo sentimos, debes esperar hasta que termine tu perÃ­odo menstrual para realizar el automuestreo.
  utter_ask_automuestreo_form_fecha_ultima_menstruacion:
  - text: |
      Listo hemos terminado con la validacion de los criterios de inclusion y exclusion.
      Â¿Fecha del primer dÃ­a de su Ãºltima menstruaciÃ³n?
    custom:
      teclado_fecha: true
      meses_limite: 2 #hasta un dia antetrior
      # agregar boton opciones
      # validar la ultima fecha de menstruacion limite de tiempo maximo dos meses antes
  utter_ask_automuestreo_form_fecha_ultimo_pap:
  - text: Â¿Hace cuÃ¡nto tiempo te realizaste un examen de Papanicolaou (Pap)?
    custom:
      teclado_fecha: true
      mostrar_nunca: true
  utter_ask_automuestreo_form_fecha_ultimo_vph:
  - text: Â¿Hace cuÃ¡nto tiempo te realizaste una prueba de Virus del Papiloma Humano (VPH)?
    custom:
      teclado_fecha: true
      mostrar_nunca: true
  utter_ask_automuestreo_form_num_parejas_sexuales:
  - text: 'Por favor, indica el nÃºmero de parejas sexuales que has tenido. (Ejemplo: 2)'
    custom:
      teclado_numerico: true
  utter_ask_automuestreo_form_tiene_ets:
  - text: Â¿Ha sido diagnosticado o sospecha de tener alguna Enfermedad de TransmisiÃ³n Sexual (ETS)?
    buttons:
    - title: Si
      payload: /confirmacion{{"ets":true}}
    - title: No
      payload: /negacion{{"ets":false}}
      # boton mas informacion
  utter_ask_nombre_ets:
  - text: Por favor indica el nombre de la ETS que tienes o has tenido.
  # enviar opcioens de nombre de enfernedades
  utter_ask_automuestreo_form_tiene_enfermedad_autoinmune:
  - text: Â¿Ha sido diagnosticado con alguna enfermedad autoinmune?
    buttons:
    - title: Si
      payload: /confirmacion{{"enfermedad_autoinmune":true}}
    - title: No
      payload: /negacion{{"enfermedad_autoinmune":false}}
      #boton mas informacion
  utter_ask_nombre_enfermedad_autoinmune:
  - text: Por favor indica el nombre de la enfermedad autoinmune.
  #enciar nombres de opciones de nefemredadees
  utter_proceso_completo_indicaciones:
  - text: |
      âœ… Â¡Listo! Cumples con todos los criterios para realizarte la prueba de automuestreo.
      Recuerda que **debes realizar la toma de muestra en este momento**, ya que tienes **30 minutos para completar el procedimiento**.
      ðŸ‘‰ Ahora, por favor **presiona el botÃ³n que aparece en pantalla para que puedas escanear el dispositivo**.
      ðŸ”´ Importante:
        Una vez hayas tomado la muestra, **no olvides entregar el dispositivo en el GAD mÃ¡s cercano**.
      Si no completas el proceso en el tiempo indicado, tendrÃ¡s que **volver a iniciar desde cero respondiendo nuevamente todas las preguntas**.
      ðŸ•’ Â¡Tienes 30 minutos! Comienza ahora presionando el botÃ³n.
    custom:
      text: mostrar video
  utter_formulario_detenido:
  - text: |
      ðŸ›‘ El proceso de automuestreo ha sido detenido.
      Si deseas continuar, puedes iniciar nuevamente el proceso.
      Â¿En quÃ© mÃ¡s puedo ayudarte?
  utter_preguntar_continuar:
  - text: |
      Â¿Deseas continuar con el proceso de automuestreo?
      Por favor, responde con "SÃ­" o "No".
  utter_automuestreo_introduccion:
  - text: |
      ðŸ“‹ **Â¡Comenzemos con el proceso!**
      Primero debemos asegurarnos de que eres apta para realizarte el automuestreo en este momento.
      Por favor, responde a las siguientes preguntas con sinceridad.
