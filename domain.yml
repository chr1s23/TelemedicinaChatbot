version: '3.1'
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
intents:
- consult_info
- despedida
- iniciar_proceso
- out_of_scope
- saludo
actions:
- action_finish_form
- action_consult_info
- validate_automuestreo_form
entities:
- rango_edad
- sexual_activa
- relacion_reciente
- capacidad_mental
- idioma_espanol
- embarazada
- tratamiento_ccu
- medi_intravaginal
- menstruando
- ets
- enfermedad_autoinmune

slots:
  formulario_completo:
    type: bool
    influence_conversation: false
    mappings:
    - type: custom
  edad_usuario:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: rango_edad
  es_sexual_activa:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: sexual_activa
  tiene_capacidad_mental:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: capacidad_mental
  habla_espanol:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: idioma_espanol
  esta_embarazada:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: embarazada
  tratamiento_previo_ccu:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: tratamiento_ccu
  relacion_reciente_horas:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: relacion_reciente
  toma_medi_intravaginal:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: medi_intravaginal
  esta_menstruando_ahora:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: menstruando
  fecha_ultima_menstruacion:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  fecha_ultimo_pap:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  fecha_ultimo_vph:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  num_parejas_sexuales:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  tiene_ets:
    type: bool
    mappings:
    - type: from_entity
      entity: ets
  nombre_ets:
    type: text
    mappings:
    - type: custom
  tiene_enfermedad_autoinmune:
    type: bool
    mappings:
    - type: from_entity
      entity: enfermedad_autoinmune
  nombre_enfermedad_autoinmune:
    type: text
    mappings:
    - type: custom
forms:
  automuestreo_form:
    required_slots:
    - edad_usuario
responses:
  #Respuestas informativas generales
  utter_saludo:
  - text: |
      ðŸ‘‹ Â¡Hola! Soy tu asistente virtual de salud. 
      Estoy aquÃ­ para responder tus preguntas sobre el **Automuestreo, Virus del Papiloma Humano (VPH), CÃ¡ncer de Cuello Uterino (CCU)** y temas relacionados con tu salud sexual y reproductiva. 
      Si tienes alguna duda, puedes preguntarme. Â¡Estoy para ayudarte! ðŸ˜Š
  utter_despedida:
  - text: |
      âœ… Gracias por confiar en este espacio de informaciÃ³n. 
      Si tienes mÃ¡s preguntas sobre **Automuestreo, VPH, CÃ¡ncer de Cuello Uterino o salud sexual y reproductiva**, no dudes en volver. 
      Â¡Cuida de ti y de tu salud! ðŸ˜Š
  utter_out_of_scope:
  - text: |
      Lo siento, no puedo responder ese tipo de preguntas.
      Puedo responder pregutnas sobre el **Virus del Papiloma Humano (VPH), CÃ¡ncer de Cuello Uterino (CCU), Automuestreo o salud sexual y reproductiva**.
      Si tienes alguna pregunta sobre estos temas, estarÃ© encantado de ayudarte. ðŸ˜Š
  #Respuestas correspondientes al formulario, criterios de inclusion y exclusion
  utter_ask_automuestreo_form_edad_usuario:
  - text: |
      ðŸ“‹ **Â¡Comenzemos con el proceso de Automuestreo!**
      Primero debemos asegurarnos de que **eres apta** para realizarte el automuestreo en este momento.
      Por favor, Â¡responde a las siguientes preguntas con sinceridad!.
      Â¿Tu edad estÃ¡ entre los 30 y 65 aÃ±os?
    buttons:
    - title: Si
      payload: /confirmacion{{"rango_edad":true}}
    - title: No
      payload: /negacion{{"rango_edad":false}}
  utter_no_cumple_edad:
  - text: Lo sentimos, no puedes ser parte del estudio porque **no cumples con la edad requerida (30 - 65 aÃ±os)**. Sin embargo, es importante que te realices exÃ¡menes de Papanicolaou (Pap) y pruebas de Virus del Papiloma Humano (VPH) regularmente.
  utter_ask_automuestreo_form_es_sexual_activa:
  - text: Â¿Tienes o has tenido vida sexual activa?
    buttons:
    - title: Si
      payload: /confirmacion{{"sexual_activa":true}}
    - title: No
      payload: /negacion{{"sexual_activa":false}}
  utter_no_tiene_relacion_sexual:
  - text: No es necesario que te realices el **Automuestreo** en este momento **si no has tenido relaciones sexuales**. Â¡Recuerda cuidar de tu salud!.
  utter_ask_automuestreo_form_relacion_reciente_horas:
  - text: Â¿Has tenido relaciones sexuales en las Ãºltimas 48 horas?
    buttons:
    - title: Si
      payload: /confirmacion{{"relacion_reciente":true}}
    - title: No
      payload: /negacion{{"relacion_reciente":false}}
  utter_relacion_reciente:
  - text: Lo sentimos, para realizarte el Automuestreo **no debes tener relaciones sexuales en las Ãºltimas 48 horas**. Puedes intentar otro dÃ­a.
  utter_ask_automuestreo_form_tiene_capacidad_mental:
  - text: Â¿Tienes la capacidad de entender la naturaleza, el propÃ³sito y los posibles riesgos del estudio, asÃ­ como de dar un consentimiento informado?
    buttons:
    - title: Si
      payload: /confirmacion{{"capacidad_mental":true}}
    - title: No
      payload: /negacion{{"capacidad_mental":false}}
  utter_no_capacidad_mental:
  - text: Lo sentimos, **es necesario que te encuentres bien de tu salud mental** para realizarte el Automuestreo en este momento.
  utter_ask_automuestreo_form_habla_espanol:
  - text: Â¿Eres capaz de comunicarte en espaÃ±ol?
    buttons:
    - title: Si
      payload: /confirmacion{{"idioma_espanol":true}}
    - title: No
      payload: /negacion{{"idioma_espanol":false}}
  utter_no_habla_espanol:
  - text: El proceso **solo estÃ¡ disponible en EspaÃ±ol**. Sin embargo, es importante que acudas a tu **Centro de Salud mÃ¡s cercano** para hacerte pruebas de Papanocolaou y VPH!.
  utter_ask_automuestreo_form_esta_embarazada:
  - text: Â¿EstÃ¡s embarazada?
    buttons:
    - title: Si
      payload: /confirmacion{{"embarazada":true}}
    - title: No
      payload: /negacion{{"embarazada":false}}
  utter_esta_embarazada:
  - text: Para realizarte el Automuestreo **es necesario que no te encuentres embarazada**. No puedes ser parte del estudio en este momento. Sin embargo, **es importante que puedas hacerlo cuando ya no estÃ©s embarazada** ðŸ˜Š!.
  utter_ask_automuestreo_form_tratamiento_previo_ccu:
  - text: Â¿Has tenido un tratamiento previo del cuello uterino (quimioterapia, LEEP, LLETZ) en los Ãºltimos 6 meses?
    buttons:
    - title: Si
      payload: /confirmacion{{"tratamiento_ccu":true}}
    - title: No
      payload: /negacion{{"tratamiento_ccu":false}}
  utter_tratamiento_previo_ccu:
  - text: Lo sentimos, **es necesario que no hayas tenido tratamientos previos en los Ãºltimos 6 meses**. En este momento no eres apta para el Automuestreo, **es importante que pruebes en otra ocasiÃ³n** ðŸ˜Š!.
  utter_ask_automuestreo_form_toma_medi_intravaginal:
  - text: Â¿Has utilizado algÃºn medicamento intravaginal en la Ãºltima semana?
    buttons:
    - title: Si
      payload: /confirmacion{{"medi_intravaginal":true}}
    - title: No
      payload: /negacion{{"medi_intravaginal":false}}
  utter_toma_medi_intravaginal:
  - text: Lo sentimos, no puedes realizarte el automuestreo en este momento. Es **importante que lo intentes en otro momento**!.
  utter_ask_automuestreo_form_esta_menstruando_ahora:
  - text: Â¿EstÃ¡s con tu perÃ­odo menstrual en este momento?
    buttons:
    - title: Si
      payload: /confirmacion{{"menstruando":true}}
    - title: No
      payload: /negacion{{"menstruando":false}}
  utter_esta_menstruando_ahora:
  - text: Lo sentimos, **debes esperar hasta que termine tu perÃ­odo menstrual** para realizar el Automuestreo ðŸ˜Š.
  utter_ask_automuestreo_form_fecha_ultima_menstruacion:
  - text: |
      Todo listo! Hemos determinado que **sÃ­ eres apta para realizarte el Automuestreo**. Por favor, responde estas preguntas con **sinceridad** para continuar!.
      Â¿Fecha del primer dÃ­a de su Ãºltima menstruaciÃ³n?
    custom:
      selector_fecha: true
      meses_limite_anteriores: 2 #fecha de menstruacion limite de tiempo maximo dos meses antes
      dias_anteriores: 1 #hasta un dia antetrior
      buttons:
      - title: No Recuerdo
  utter_ask_automuestreo_form_fecha_ultimo_pap:
  - text: Â¿CuÃ¡ndo fuÃ© tu Ãºtltimo examen de Papanicolaou (Pap)?
    custom:
      selector_fecha: true
      buttons:
      - title: Nunca
  utter_ask_automuestreo_form_fecha_ultimo_vph:
  - text: Â¿CuÃ¡ndo fuÃ© tu Ãºltima prueba de Virus del Papiloma Humano (VPH)?
    custom:
      selector_fecha: true
      buttons:
      - title: Nunca
  utter_ask_automuestreo_form_num_parejas_sexuales:
  - text: 'Por favor, indica el nÃºmero de parejas sexuales que has tenido. (Ejemplo: 2)'
    custom:
      teclado_numerico: true
  utter_ask_automuestreo_form_tiene_ets:
  - text: Â¿Ha sido diagnosticado o sospecha de tener alguna Enfermedad de TransmisiÃ³n Sexual (ETS)?
    buttons:
    - title: Si
      payload: /confirmacion{{"ets":true}}
    - title: No
      payload: /negacion{{"ets":false}}
    - title: MÃ¡s informaciÃ³n
      payload: |
        Las **Enfermedades de TransmisiÃ³n Sexual** (ETS) son infecciones que se transmiten principalmente a travÃ©s del **contacto sexual sin protecciÃ³n**, ya sea vaginal, anal u oral. Son causadas por virus, bacterias, hongos o parÃ¡sitos. Algunas ETS comunes incluyen el **Virus del Papiloma Humano (VPH), VIH, sÃ­filis, gonorrea y clamidia**.
        El diagnÃ³stico de una ETS se realiza mediante exÃ¡menes mÃ©dicos como **pruebas de sangre, orina o hisopados en las zonas afectadas**. En algunos casos, los sÃ­ntomas pueden ser evidentes (Ãºlceras, secreciones, dolor), pero **muchas ETS pueden ser asintomÃ¡ticas**, por lo que es clave **realizar chequeos regulares**, especialmente si se tiene una vida sexual activa.
        La prevenciÃ³n incluye el **uso correcto del preservativo, pruebas periÃ³dicas y vacunaciÃ³n** (como contra el VPH y la hepatitis B). Si se detecta una ETS, **es fundamental seguir el tratamiento adecuado y comunicarlo a la pareja** para evitar su propagaciÃ³n.
  utter_ask_nombre_ets:
  - text: Por favor, indica el nombre de la ETS que tienes o has tenido.
    custom:
      buttons:
      - title: VPH
      - title: Clamidia
      - title: Gonorrea
      - title: Sifilis
      - title: Herpes
      - title: VIH/SIDA
      - title: Hepatitis B
  utter_ask_automuestreo_form_tiene_enfermedad_autoinmune:
  - text: Â¿Ha sido diagnosticado con alguna enfermedad autoinmune?
    buttons:
    - title: Si
      payload: /confirmacion{{"enfermedad_autoinmune":true}}
    - title: No
      payload: /negacion{{"enfermedad_autoinmune":false}}
    - title: MÃ¡s informaciÃ³n
      payload: |
        Las **enfermedades autoinmunes** ocurren cuando el sistema inmunolÃ³gico ataca por error las cÃ©lulas y tejidos sanos del propio cuerpo, en lugar de defenderlo contra infecciones. Esto puede afectar diversos Ã³rganos y sistemas, **causando inflamaciÃ³n y daÃ±o crÃ³nico**. Algunas enfermedades autoinmunes comunes incluyen **la artritis reumatoide, el lupus, la esclerosis mÃºltiple y la diabetes tipo 1**.
        El diagnÃ³stico suele basarse en **sÃ­ntomas, anÃ¡lisis de sangre para detectar anticuerpos anormales y estudios de imÃ¡genes** para evaluar el daÃ±o en los Ã³rganos afectados. Estas enfermedades pueden tener sÃ­ntomas como **fatiga, dolor, inflamaciÃ³n y alteraciones en la piel u Ã³rganos internos**.
        Aunque no tienen cura, **los tratamientos ayudan a controlar los sÃ­ntomas y reducir la respuesta inmunolÃ³gica excesiva**. Entre ellos estÃ¡n los medicamentos inmunosupresores, antiinflamatorios y cambios en el estilo de vida. Un diagnÃ³stico temprano y un tratamiento adecuado son clave para mejorar la calidad de vida.
  utter_ask_nombre_enfermedad_autoinmune:
  - text: Por favor, indica el nombre de la enfermedad autoinmune.
    custom:
      buttons:
      - title: Artritis Reumatoide
      - title: Lupus
      - title: Esclerosis MÃºltiple
      - title: Diabetes
      - title: Psoriasis
  utter_proceso_completo_indicaciones:
  - text: |
      âœ… Â¡Listo! **Cumples con todos los criterios** para realizarte la prueba de Automuestreo.
      Recuerda que **debes realizar la toma de muestra en este momento**, ya que tienes **30 minutos para completar el procedimiento**.
      ðŸ‘‰ Ahora, por favor **presiona el botÃ³n que aparece en pantalla para que puedas escanear el dispositivo**.
      ðŸ”´ Importante:
      Una vez hayas tomado la muestra, **no olvides entregar el dispositivo en el GAD mÃ¡s cercano**.
      Si no completas el proceso en el tiempo indicado, tendrÃ¡s que **volver a iniciar desde cero respondiendo nuevamente todas las preguntas**.
      ðŸ•’ Â¡Tienes 30 minutos! Comienza ahora presionando el botÃ³n.
    custom:
      buttons:
      - title: Â¡Escanear dispositvo!
        payload: true
      - title: Ver video
        payload: true
  #Espacio para iniciar con las respuestas  generales
